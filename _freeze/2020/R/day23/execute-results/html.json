{
  "hash": "dfb25dd2bb446b513cf0ce21d100f8b2",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Day 23\"\ndate: 2020-12-23\nauthor:\n  name: https://adventofcode.com/2020/day/23\n  url: https://adventofcode.com/2020/day/23\nexecute:\n  eval: true\n---\n\n\n\n\n## Setup\n\nImport libraries:\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\n```\n:::\n\n\n\n\nRead text input from file:\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ninput <- read_lines(\"../input/day23.txt\") |> \n  str_split_1(\"\") |> \n  as.numeric()\n```\n:::\n\n\n\n\n## Part 1\n\nDefine a game function which uses a linked list structure to quickly identify and reorder neighbors:\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nrun_game <- function(init, n_moves) {\n  \n  # Convert ordered vector to linked list\n  cur    <- head(init, 1)\n  linked <- lead(init, default = cur)[order(init)]\n  \n  # For the specified number of rounds, reorder the linked list by game rules\n  for (n in 1:n_moves) {\n  \n    clockwise <- cur\n    pickup <- c()\n    \n    for (i in 1:3) {\n      clockwise <- linked[clockwise]\n      pickup <- c(pickup, clockwise)\n    }\n    \n    dest <- setdiff(((cur - (1:4) - 1) %% length(linked)) + 1, pickup)[1]\n  \n    linked[cur]       <- linked[pickup[3]]\n    linked[pickup[3]] <- linked[dest]\n    linked[dest]      <- pickup[1]\n  \n    cur <- linked[cur]\n  }\n  \n  linked\n}\n```\n:::\n\n\n\n\nRun 100 rounds on the puzzle input:\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\noutput <- run_game(input, 100)\n```\n:::\n\n\n\n\nGather the labels of all cups after cup 1, in order:\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nvec <- 1\n\nfor (n in 2:length(output)) {\n  vec <- c(vec, output[tail(vec, 1)])\n}\n\nvec |> \n  tail(-1) |> \n  str_flatten(\"\")\n```\n:::\n\n\n\n\n## Part 2\n\nExpand the puzzle input up to 1,000,000, then run 10,000,000 rounds on the new input:\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\noutput <- run_game(c(input, (max(input) + 1):1000000), 10000000)\n```\n:::\n\n\n\n\nMultiply the values of first two clockwise cups in the final output following cup 1:\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\noutput[1] * output[output[1]]\n```\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}